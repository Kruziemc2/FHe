<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>實時觀測數據 | Data Analysis & Real-Time Space Data</title>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background-color: black; color: white; font-family: Arial, sans-serif; text-align: center; }
        h1, h2 { color: white; }
        p { color: white; max-width: 900px; margin: 0 auto; text-align: justify; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; }
        .box { width: 45%; margin: 10px; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        canvas { max-width: 100%; background: white; border-radius: 5px; }
        .contact { margin-top: 40px; }
        .contact a { color: #1e90ff; margin: 0 10px; text-decoration: none; }
        .nav { text-align: center; margin-bottom: 20px; }
        .nav a { color: #00bfff; margin: 0 15px; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <h1>實時觀測數據 | Data Analysis & Real-Time Space Data</h1>
    <div class="nav">
        🔙 <a href="../index.html">首頁 | Home</a> |
        ☀️ <a href="Solar_Data.html">太陽數據 | Solar Data</a> |
        🌍 <a href="Earth_Data.html">地球數據 | Earth Data</a> |
        🌑 <a href="Moon_Data.html">月球數據 | Moon Data</a>
    </div>
</header>

<section>
    <h2>📌 主要觀測數據 | Key Observational Data</h2>
    <p>
        此頁面提供來自官方機構的即時數據，包括 **NASA、NOAA、ESA、USGS**，數據來自各種監測衛星與探測器，並會 **每 15 秒自動更新**。
    </p>
</section>

<div class="container">
    <div class="box">
        <h2>🌞 太陽風數據 | Solar Wind Data</h2>
        <p>來自 NASA ACE 衛星 (Advanced Composition Explorer) 的最新數據：</p>
        <iframe src="https://services.swpc.noaa.gov/images/ace-swepam-density.gif" width="100%" height="300px"></iframe>
        <p>☀️ 太陽風速度: <span id="solar_wind_speed">Loading...</span> km/s</p>
        <p>⚡ 電漿密度: <span id="solar_wind_density">Loading...</span> p/cm³</p>
    </div>

    <div class="box">
        <h2>🌍 地球磁場變化 | Earth's Magnetic Field</h2>
        <p>來自 NOAA 的地磁指數圖表：</p>
        <iframe src="https://services.swpc.noaa.gov/images/planetary-k-index.gif" width="100%" height="300px"></iframe>
        <p>🌎 K 指數: <span id="k_index">Loading...</span></p>
    </div>
</div>

<div class="container">
    <div class="box">
        <h2>📈 太陽黑子數量 | Sunspot Activity</h2>
        <canvas id="sunspot_chart"></canvas>
    </div>

    <div class="box">
        <h2>🚀 國際太空站位置 | ISS Live Location</h2>
        <p>即時追蹤國際太空站 (ISS) 位置：</p>
        <iframe src="https://www.n2yo.com/iframe/?s=25544&c=iss" width="100%" height="300px"></iframe>
    </div>
</div>

<script>
    async function fetchData() {
        // API Key
        const apiKey = "UlxbY1TIgdhFZkW4FgeIcrOa3Ttb4TVYU4W3nV3S";  // 請替換為你的 API Key

        // 1. 獲取太陽風數據 (Solar Wind Data)
        const solarWindUrl = `https://api.nasa.gov/DONKI/FLR?api_key=${apiKey}`;
        let solarWindResponse = await fetch(solarWindUrl);
        let solarWindData = await solarWindResponse.json();
        document.getElementById("solar_wind_speed").innerText = solarWindData[0]?.speed || "N/A";
        document.getElementById("solar_wind_density").innerText = solarWindData[0]?.density || "N/A";

        // 2. 獲取地磁場 K 指數 (Kp Index)
        const geomagneticUrl = `https://api.nasa.gov/DONKI/GST?api_key=${apiKey}`;
        let geoResponse = await fetch(geomagneticUrl);
        let geoData = await geoResponse.json();
        document.getElementById("k_index").innerText = geoData[0]?.kp_index || "N/A";

        // 3. 更新太陽黑子數據
        updateSunspotChart();
    }

    function updateSunspotChart() {
        let ctx = document.getElementById('sunspot_chart').getContext('2d');
        let sunspotChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
                datasets: [{
                    label: 'Sunspot Number',
                    data: [45, 30, 60, 80, 75, 50], // 這些數據應該來自 API
                    borderColor: 'yellow',
                    borderWidth: 2
                }]
            },
            options: { responsive: true }
        });
    }

    // 每 15 秒更新數據
    setInterval(fetchData, 15000);
    fetchData();
</script>

<footer class="contact">
    <p>創作者 | Author: Kru, Yupin Su.</p>
    <p>📧 Email: kruzi.eemc2@gmail.com | 🔗 <a href="#">LinkedIn</a> | <a href="#">Facebook</a> | <a href="#">Instagram</a></p>
</footer>

</body>
</html>
