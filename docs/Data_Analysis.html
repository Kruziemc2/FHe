<!DOCTYPE html>
<footer>
    <p>Â© 2025 <strong>Kru Su</strong> | èµ«çˆ¾æ–¯ç›¾å ´ç ”ç©¶å‰µå»ºè€…</p>
</footer>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ«çˆ¾æ–¯ç›¾å ´ æ•¸æ“šåˆ†æ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
            text-align: center;
        }
        h1 {
            color: #FFD700;
        }
        .data-section {
            margin: 20px;
            padding: 10px;
            border-radius: 10px;
            background-color: #1e1e1e;
        }
        .data-item {
            font-size: 18px;
            margin: 10px 0;
        }
        .chart-container {
            width: 80%;
            margin: auto;
        }
    </style>
    <script>
        async function fetchData() {
                const API_KEY ="UlxbY1TIgdhFZkW4FgeIcrOa3Ttb4TVYU4W3nV3S"; // åœ¨é€™è£¡æ›¿æ›ç‚ºä½ çš„ API Key
            const API_URL = "https://api.solarsystemdata.com/v1/solarwind";

            try {
                const response = await fetch(API_URL, {
                    headers: { "Authorization": `Bearer ${UlxbY1TIgdhFZkW4FgeIcrOa3Ttb4TVYU4W3nV3S}` }
                });
                const data = await response.json();

                document.getElementById("solarwind").innerHTML = `ğŸŒ å¤ªé™½é¢¨é€Ÿåº¦: ${data.velocity} km/s`;
                document.getElementById("magnetic").innerHTML = `ğŸ§² ç£å ´å¼·åº¦: ${data.magnetic} nT`;
                document.getElementById("density").innerHTML = `ğŸŒŒ ç²’å­å¯†åº¦: ${data.density} cmÂ³`;
                document.getElementById("radiation").innerHTML = `â˜¢ é«˜èƒ½ç²’å­è¼»å°„: ${data.sep_flux} flux`;

                // æ›´æ–°æ•¸æ“šæ­·å²
                updateHistory(data);
            } catch (error) {
                console.error("ç²å–æ•¸æ“šå¤±æ•—", error);
            }
        }

        let historyData = [];

        function updateHistory(newData) {
            if (historyData.length >= 5) historyData.shift();
            historyData.push({
                time: new Date().toLocaleTimeString(),
                velocity: newData.velocity,
                magnetic: newData.magnetic,
                density: newData.density,
                radiation: newData.sep_flux
            });

            let historyHTML = "<h3>ğŸ“œ éå»æ•¸æ“š</h3><ul>";
            historyData.forEach(entry => {
                historyHTML += `<li>${entry.time} | é¢¨é€Ÿ: ${entry.velocity} km/s | ç£å ´: ${entry.magnetic} nT | å¯†åº¦: ${entry.density} cmÂ³ | è¼»å°„: ${entry.radiation} flux</li>`;
            });
            historyHTML += "</ul>";
            document.getElementById("history").innerHTML = historyHTML;
        }

        setInterval(fetchData, 5000); // æ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡æ•¸æ“š
    </script>
</head>
<body onload="fetchData()">
    <h1>èµ«çˆ¾æ–¯ç›¾å ´ æ•¸æ“šåˆ†æ</h1>
    <p>æ­¤é é¢é¡¯ç¤ºä¾†è‡ª Solar System API çš„**å³æ™‚æ•¸æ“š**ã€‚</p>

    <div class="data-section">
        <h2>ğŸ“¡ å³æ™‚æ•¸æ“š</h2>
        <p class="data-item" id="solarwind">è¼‰å…¥ä¸­...</p>
        <p class="data-item" id="magnetic">è¼‰å…¥ä¸­...</p>
        <p class="data-item" id="density">è¼‰å…¥ä¸­...</p>
        <p class="data-item" id="radiation">è¼‰å…¥ä¸­...</p>
    </div>

    <div class="data-section" id="history">
        <h2>ğŸ“œ éå»æ•¸æ“š</h2>
        <p>æ•¸æ“šå³å°‡é¡¯ç¤º...</p>
    </div>

    <div class="chart-container">
        <h2>ğŸ“Š æ•¸æ“šè¶¨å‹¢</h2>
        <canvas id="dataChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let chartData = {
            labels: [],
            datasets: [{
                label: 'å¤ªé™½é¢¨é€Ÿåº¦ (km/s)',
                borderColor: 'rgba(255, 99, 132, 1)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                data: []
            }]
        };

        let ctx = document.getElementById("dataChart").getContext("2d");
        let dataChart = new Chart(ctx, {
            type: "line",
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: false }
                }
            }
        });

        function updateChart(newData) {
            if (chartData.labels.length >= 10) {
                chartData.labels.shift();
                chartData.datasets[0].data.shift();
            }
            chartData.labels.push(new Date().toLocaleTimeString());
            chartData.datasets[0].data.push(newData.velocity);

            dataChart.update();
        }

        setInterval(() => {
            fetch("https://api.solarsystemdata.com/v1/solarwind", {
                headers: { "Authorization": "Bearer UlxbY1TIgdhFZkW4FgeIcrOa3Ttb4TVYU4W3nV3S" }
            })
            .then(response => response.json())
            .then(data => {
                updateChart(data);
            })
            .catch(error => console.error("ç„¡æ³•ç²å–æ–°æ•¸æ“š", error));
        }, 5000);
    </script>
</body>
</html>
